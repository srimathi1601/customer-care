const translations = {
  en: {
    'nav.home': 'Home',
    'nav.products': 'Products Help & Setup',
    'nav.about': 'About',
    'nav.contact': 'Contact',
    'nav.shop': 'Shop',
    'hero.your': 'Your',
    'hero.movement': 'Movement.',
    'hero.our': 'Our',
    'hero.drive': 'drive.',
    'search.placeholder': 'Search for answers in seconds',
    'cards.service.title': 'Your direct <br> customer service',
    'cards.service.desc': 'Already a Sportstech customer? Our customer service is here to help: Track your order, solve technical issues, and get fast answers anytime.',
    'cards.service.button': 'Chat with Support',
    'cards.advisor.title': 'Product Advisor <br> Find your perfect device',
    'cards.advisor.desc': 'Get personalized advice, discover the right Sportstech product for your goals, and receive support with your order – quick and easy.',
    'cards.advisor.button': 'Chat with Sales',
    'knowledge.link': 'To the Knowledge Base',
    'quickAccess.title': 'Quick Access Help',
    'quickAccess.hotline.title': 'Talk to Us (Service Hotline)',
    'quickAccess.hotline.desc': 'Need quick support or personal advice? Our support heroes are just a call away. Dial: (+49) 030 868 224 64',
    'quickAccess.video.title': 'Step-by-Step Video Guides',
    'quickAccess.video.desc': 'Master your Product like a pro! Explore assembly videos, experts tips, and tutorials at your fingertips.',
    'explore.title': 'Explore Support Topics',
    'explore.product.title': 'Product Help & Setup',
    'explore.product.desc': 'Assembly instructions | Troubleshooting | FAQ | Smart usage hacks',
    'explore.orders.title': 'Orders & Deliveries',
    'explore.orders.desc': 'Track packages | Invoices | Cancellations | Shipping updates',
    'explore.payments.title': 'Payments & Billing',
    'explore.payments.desc': 'Online methods | Discounts | Secure checkout | Subscriptions',
    'explore.warranty.title': 'Warranty & Returns',
    'explore.warranty.desc': 'Exchanges | Repairs | Refunds | Product upgrades',
    'explore.store.title': 'Brand Store Berlin',
    'explore.store.desc': 'Try before you buy! Visit us at our flagship store for an in-person experience',
    'explore.app.title': 'Sportstech Live App',
    'explore.app.desc': 'Control, track & connect with your fitness gear anytime.',
    'explore.showAll': 'Show all posts',
    'dual.return.title': 'Need to Return a Product?',
    'dual.return.desc': 'Fast & hassle free returns,<br>we\'ll guide you every step of the way.',
    'dual.return.button': 'Go to Return Portal',
    'dual.store.title': 'Wanna Try </br>Before You Buy?',
    'dual.store.desc': 'Experience our gear in action at the </br/> Berlin Brand Store.',
    'dual.store.button': 'Take Me There',
    'social.title': 'Stay Connected',
    'social.desc': 'Follow us on social media for fitness tips, updates & exclusive deals!',
    'footer.company': 'Sportstech Brands<br />Holding GmbH',
    'footer.slogan1': 'PUSHING LIMITS.',
    'footer.slogan2': 'BREAKING BARRIERS.',
    'footer.slogan3': 'REDEFINING FITNESS.',
    'footer.terms': 'Terms & Conditions',
    'footer.privacy': 'Privacy Policy',
    'footer.imprint': 'Imprint'
  },
  de: {
    'nav.home': 'Startseite',
    'nav.products': 'Produkthilfe & Einrichtung',
    'nav.about': 'Über uns',
    'nav.contact': 'Kontakt',
    'nav.shop': 'Shop',
    'hero.your': 'Deine',
    'hero.movement': 'Bewegung.',
    'hero.our': 'Unser',
    'hero.drive': 'Antrieb.',
    'search.placeholder': 'Suche nach Antworten in Sekunden',
    'cards.service.title': 'Dein direkter <br> Kundenservice',
    'cards.service.desc': 'Bereits Sportstech-Kunde? Unser Kundenservice hilft dir: Verfolge deine Bestellung, löse technische Probleme und erhalte schnelle Antworten jederzeit.',
    'cards.service.button': 'Chat mit Support',
    'cards.advisor.title': 'Produktberater <br> Finde dein perfektes Gerät',
    'cards.advisor.desc': 'Erhalte persönliche Beratung, entdecke das richtige Sportstech-Produkt für deine Ziele und erhalte Unterstützung bei deiner Bestellung – schnell und einfach.',
    'cards.advisor.button': 'Chat mit Verkauf',
    'knowledge.link': 'Zur Wissensdatenbank',
    'quickAccess.title': 'Schnelle Hilfe',
    'quickAccess.hotline.title': 'Sprich mit uns (Service-Hotline)',
    'quickAccess.hotline.desc': 'Brauchst du schnelle Unterstützung oder persönliche Beratung? Unsere Support-Helden sind nur einen Anruf entfernt. Wähle: (+49) 030 868 224 64',
    'quickAccess.video.title': 'Schritt-für-Schritt Video-Anleitungen',
    'quickAccess.video.desc': 'Beherrsche dein Produkt wie ein Profi! Entdecke Montagevideos, Expertentipps und Tutorials immer griffbereit.',
    'explore.title': 'Support-Themen erkunden',
    'explore.product.title': 'Produkthilfe & Einrichtung',
    'explore.product.desc': 'Montageanleitungen | Fehlerbehebung | FAQ | Clevere Nutzungstipps',
    'explore.orders.title': 'Bestellungen & Lieferungen',
    'explore.orders.desc': 'Pakete verfolgen | Rechnungen | Stornierungen | Versand-Updates',
    'explore.payments.title': 'Zahlungen & Abrechnung',
    'explore.payments.desc': 'Online-Methoden | Rabatte | Sichere Kasse | Abonnements',
    'explore.warranty.title': 'Garantie & Rücksendungen',
    'explore.warranty.desc': 'Umtausch | Reparaturen | Rückerstattungen | Produkt-Upgrades',
    'explore.store.title': 'Brand Store Berlin',
    'explore.store.desc': 'Probiere vor dem Kauf! Besuche uns in unserem Flagship-Store für ein persönliches Erlebnis',
    'explore.app.title': 'Sportstech Live App',
    'explore.app.desc': 'Steuere, verfolge und verbinde dich jederzeit mit deinen Fitnessgeräten.',
    'explore.showAll': 'Alle Beiträge anzeigen',
    'dual.return.title': 'Produkt zurücksenden?',
    'dual.return.desc': 'Schnelle & problemlose Rücksendungen,<br>wir führen dich durch jeden Schritt.',
    'dual.return.button': 'Zum Rücksende-Portal',
    'dual.store.title': 'Willst du vor dem Kauf </br>testen?',
    'dual.store.desc': 'Erlebe unsere Geräte in Aktion im </br/> Berlin Brand Store.',
    'dual.store.button': 'Bring mich hin',
    'social.title': 'Bleib verbunden',
    'social.desc': 'Folge uns in den sozialen Medien für Fitness-Tipps, Updates & exklusive Angebote!',
    'footer.company': 'Sportstech Brands<br />Holding GmbH',
    'footer.slogan1': 'GRENZEN ÜBERWINDEN.',
    'footer.slogan2': 'BARRIEREN BRECHEN.',
    'footer.slogan3': 'FITNESS NEU DEFINIEREN.',
    'footer.terms': 'Allgemeine Geschäftsbedingungen',
    'footer.privacy': 'Datenschutzrichtlinie',
    'footer.imprint': 'Impressum'
  },
  es: {
    'nav.home': 'Inicio',
    'nav.products': 'Ayuda y Configuración de Productos',
    'nav.about': 'Acerca de',
    'nav.contact': 'Contacto',
    'nav.shop': 'Tienda',
    'hero.your': 'Tu',
    'hero.movement': 'Movimiento.',
    'hero.our': 'Nuestro',
    'hero.drive': 'impulso.',
    'search.placeholder': 'Busca respuestas en segundos',
    'cards.service.title': 'Tu servicio directo <br> al cliente',
    'cards.service.desc': '¿Ya eres cliente de Sportstech? Nuestro servicio al cliente está aquí para ayudarte: Rastrea tu pedido, resuelve problemas técnicos y obtén respuestas rápidas en cualquier momento.',
    'cards.service.button': 'Chat con Soporte',
    'cards.advisor.title': 'Asesor de Productos <br> Encuentra tu dispositivo perfecto',
    'cards.advisor.desc': 'Obtén asesoramiento personalizado, descubre el producto Sportstech adecuado para tus objetivos y recibe apoyo con tu pedido: rápido y fácil.',
    'cards.advisor.button': 'Chat con Ventas',
    'knowledge.link': 'A la Base de Conocimientos',
    'quickAccess.title': 'Ayuda de Acceso Rápido',
    'quickAccess.hotline.title': 'Habla con Nosotros (Línea Directa de Servicio)',
    'quickAccess.hotline.desc': '¿Necesitas soporte rápido o asesoramiento personal? Nuestros héroes de soporte están a solo una llamada. Marca: (+49) 030 868 224 64',
    'quickAccess.video.title': 'Guías de Video Paso a Paso',
    'quickAccess.video.desc': '¡Domina tu Producto como un profesional! Explora videos de montaje, consejos de expertos y tutoriales al alcance de tus dedos.',
    'explore.title': 'Explorar Temas de Soporte',
    'explore.product.title': 'Ayuda y Configuración de Productos',
    'explore.product.desc': 'Instrucciones de montaje | Solución de problemas | FAQ | Trucos de uso inteligente',
    'explore.orders.title': 'Pedidos y Entregas',
    'explore.orders.desc': 'Rastrear paquetes | Facturas | Cancelaciones | Actualizaciones de envío',
    'explore.payments.title': 'Pagos y Facturación',
    'explore.payments.desc': 'Métodos en línea | Descuentos | Pago seguro | Suscripciones',
    'explore.warranty.title': 'Garantía y Devoluciones',
    'explore.warranty.desc': 'Intercambios | Reparaciones | Reembolsos | Actualizaciones de producto',
    'explore.store.title': 'Tienda Brand Store Berlin',
    'explore.store.desc': '¡Prueba antes de comprar! Visítanos en nuestra tienda insignia para una experiencia en persona',
    'explore.app.title': 'App Sportstech Live',
    'explore.app.desc': 'Controla, rastrea y conéctate con tu equipo de fitness en cualquier momento.',
    'explore.showAll': 'Mostrar todas las publicaciones',
    'dual.return.title': '¿Necesitas Devolver un Producto?',
    'dual.return.desc': 'Devoluciones rápidas y sin complicaciones,<br>te guiaremos en cada paso.',
    'dual.return.button': 'Ir al Portal de Devoluciones',
    'dual.store.title': '¿Quieres Probar </br>Antes de Comprar?',
    'dual.store.desc': 'Experimenta nuestro equipo en acción en la </br/> Tienda Brand Store Berlin.',
    'dual.store.button': 'Llévame Allí',
    'social.title': 'Mantente Conectado',
    'social.desc': '¡Síguenos en las redes sociales para consejos de fitness, actualizaciones y ofertas exclusivas!',
    'footer.company': 'Sportstech Brands<br />Holding GmbH',
    'footer.slogan1': 'SUPERANDO LÍMITES.',
    'footer.slogan2': 'ROMPIENDO BARRERAS.',
    'footer.slogan3': 'REDEFINIENDO EL FITNESS.',
    'footer.terms': 'Términos y Condiciones',
    'footer.privacy': 'Política de Privacidad',
    'footer.imprint': 'Aviso Legal'
  },
  fr: {
    'nav.home': 'Accueil',
    'nav.products': 'Aide et Configuration des Produits',
    'nav.about': 'À propos',
    'nav.contact': 'Contact',
    'nav.shop': 'Boutique',
    'hero.your': 'Votre',
    'hero.movement': 'Mouvement.',
    'hero.our': 'Notre',
    'hero.drive': 'passion.',
    'search.placeholder': 'Recherchez des réponses en quelques secondes',
    'cards.service.title': 'Votre service client <br> direct',
    'cards.service.desc': 'Déjà client Sportstech ? Notre service client est là pour vous aider : Suivez votre commande, résolvez les problèmes techniques et obtenez des réponses rapides à tout moment.',
    'cards.service.button': 'Chat avec le Support',
    'cards.advisor.title': 'Conseiller Produit <br> Trouvez votre appareil parfait',
    'cards.advisor.desc': 'Obtenez des conseils personnalisés, découvrez le bon produit Sportstech pour vos objectifs et recevez de l\'aide avec votre commande - rapidement et facilement.',
    'cards.advisor.button': 'Chat avec les Ventes',
    'knowledge.link': 'Vers la Base de Connaissances',
    'quickAccess.title': 'Aide d\'Accès Rapide',
    'quickAccess.hotline.title': 'Parlez-nous (Ligne d\'Assistance)',
    'quickAccess.hotline.desc': 'Besoin d\'un support rapide ou de conseils personnels ? Nos héros du support ne sont qu\'à un appel. Composez : (+49) 030 868 224 64',
    'quickAccess.video.title': 'Guides Vidéo Étape par Étape',
    'quickAccess.video.desc': 'Maîtrisez votre Produit comme un pro ! Explorez les vidéos d\'assemblage, les conseils d\'experts et les tutoriels à portée de main.',
    'explore.title': 'Explorer les Sujets de Support',
    'explore.product.title': 'Aide et Configuration des Produits',
    'explore.product.desc': 'Instructions d\'assemblage | Dépannage | FAQ | Astuces d\'utilisation intelligente',
    'explore.orders.title': 'Commandes et Livraisons',
    'explore.orders.desc': 'Suivre les colis | Factures | Annulations | Mises à jour d\'expédition',
    'explore.payments.title': 'Paiements et Facturation',
    'explore.payments.desc': 'Méthodes en ligne | Remises | Paiement sécurisé | Abonnements',
    'explore.warranty.title': 'Garantie et Retours',
    'explore.warranty.desc': 'Échanges | Réparations | Remboursements | Mises à niveau de produit',
    'explore.store.title': 'Magasin Brand Store Berlin',
    'explore.store.desc': 'Essayez avant d\'acheter ! Visitez-nous dans notre magasin phare pour une expérience en personne',
    'explore.app.title': 'App Sportstech Live',
    'explore.app.desc': 'Contrôlez, suivez et connectez-vous avec votre équipement de fitness à tout moment.',
    'explore.showAll': 'Afficher tous les articles',
    'dual.return.title': 'Besoin de Retourner un Produit ?',
    'dual.return.desc': 'Retours rapides et sans tracas,<br>nous vous guiderons à chaque étape.',
    'dual.return.button': 'Aller au Portail de Retour',
    'dual.store.title': 'Vous Voulez Essayer </br>Avant d\'Acheter ?',
    'dual.store.desc': 'Découvrez notre équipement en action au </br/> Magasin Brand Store Berlin.',
    'dual.store.button': 'Emmenez-moi Là-bas',
    'social.title': 'Restez Connecté',
    'social.desc': 'Suivez-nous sur les réseaux sociaux pour des conseils de fitness, des mises à jour et des offres exclusives !',
    'footer.company': 'Sportstech Brands<br />Holding GmbH',
    'footer.slogan1': 'REPOUSSER LES LIMITES.',
    'footer.slogan2': 'BRISER LES BARRIÈRES.',
    'footer.slogan3': 'REDÉFINIR LE FITNESS.',
    'footer.terms': 'Termes et Conditions',
    'footer.privacy': 'Politique de Confidentialité',
    'footer.imprint': 'Mentions Légales'
  },
  it: {
    'nav.home': 'Casa',
    'nav.products': 'Aiuto e Configurazione Prodotti',
    'nav.about': 'Chi siamo',
    'nav.contact': 'Contatto',
    'nav.shop': 'Negozio',
    'hero.your': 'Il tuo',
    'hero.movement': 'Movimento.',
    'hero.our': 'La nostra',
    'hero.drive': 'spinta.',
    'search.placeholder': 'Cerca risposte in pochi secondi',
    'cards.service.title': 'Il tuo servizio clienti <br> diretto',
    'cards.service.desc': 'Già cliente Sportstech? Il nostro servizio clienti è qui per aiutarti: Traccia il tuo ordine, risolvi problemi tecnici e ottieni risposte veloci in qualsiasi momento.',
    'cards.service.button': 'Chat con il Supporto',
    'cards.advisor.title': 'Consulente Prodotto <br> Trova il tuo dispositivo perfetto',
    'cards.advisor.desc': 'Ottieni consigli personalizzati, scopri il prodotto Sportstech giusto per i tuoi obiettivi e ricevi supporto con il tuo ordine - veloce e facile.',
    'cards.advisor.button': 'Chat con le Vendite',
    'knowledge.link': 'Alla Base di Conoscenza',
    'quickAccess.title': 'Aiuto Accesso Rapido',
    'quickAccess.hotline.title': 'Parlaci (Hotline di Servizio)',
    'quickAccess.hotline.desc': 'Hai bisogno di supporto rapido o consigli personali? I nostri eroi del supporto sono a solo una chiamata. Componi: (+49) 030 868 224 64',
    'quickAccess.video.title': 'Guide Video Passo dopo Passo',
    'quickAccess.video.desc': 'Padroneggia il tuo Prodotto come un professionista! Esplora video di assemblaggio, consigli di esperti e tutorial a portata di mano.',
    'explore.title': 'Esplora Argomenti di Supporto',
    'explore.product.title': 'Aiuto e Configurazione Prodotti',
    'explore.product.desc': 'Istruzioni di assemblaggio | Risoluzione problemi | FAQ | Trucchi di utilizzo intelligente',
    'explore.orders.title': 'Ordini e Consegne',
    'explore.orders.desc': 'Tracciare pacchi | Fatture | Cancellazioni | Aggiornamenti spedizione',
    'explore.payments.title': 'Pagamenti e Fatturazione',
    'explore.payments.desc': 'Metodi online | Sconti | Checkout sicuro | Abbonamenti',
    'explore.warranty.title': 'Garanzia e Resi',
    'explore.warranty.desc': 'Cambi | Riparazioni | Rimborsi | Aggiornamenti prodotto',
    'explore.store.title': 'Brand Store Berlin',
    'explore.store.desc': 'Prova prima di acquistare! Visitaci nel nostro negozio principale per un\'esperienza di persona',
    'explore.app.title': 'App Sportstech Live',
    'explore.app.desc': 'Controlla, traccia e connettiti con la tua attrezzatura fitness in qualsiasi momento.',
    'explore.showAll': 'Mostra tutti i post',
    'dual.return.title': 'Hai Bisogno di Restituire un Prodotto?',
    'dual.return.desc': 'Resi veloci e senza problemi,<br>ti guideremo ad ogni passo.',
    'dual.return.button': 'Vai al Portale Resi',
    'dual.store.title': 'Vuoi Provare </br>Prima di Acquistare?',
    'dual.store.desc': 'Prova la nostra attrezzatura in azione al </br/> Brand Store Berlin.',
    'dual.store.button': 'Portami Lì',
    'social.title': 'Rimani Connesso',
    'social.desc': 'Seguici sui social media per consigli di fitness, aggiornamenti e offerte esclusive!',
    'footer.company': 'Sportstech Brands<br />Holding GmbH',
    'footer.slogan1': 'SUPERARE I LIMITI.',
    'footer.slogan2': 'ABBATTERE LE BARRIERE.',
    'footer.slogan3': 'RIDEFINIRE IL FITNESS.',
    'footer.terms': 'Termini e Condizioni',
    'footer.privacy': 'Politica sulla Privacy',
    'footer.imprint': 'Note Legali'
  }
};

// Language configuration with flag paths and display names
const languageConfig = {
  'en': { flag: 'assets/english-flag.png', name: 'English (GB)' },
  'de': { flag: 'assets/german-flag.png', name: 'German' },
  'es': { flag: 'assets/spain-flag.png', name: 'Spanish' },
  'fr': { flag: 'assets/france-flag.png', name: 'French' },
  'it': { flag: 'assets/italy-flag.png', name: 'Italian' }
};
function toggleLangList(event) {
  const list = document.getElementById("langList");
  list.style.display = (list.style.display === "block") ? "none" : "block";
  event.stopPropagation();
}

// Close dropdown when clicking outside
document.addEventListener("click", () => {
  document.getElementById("langList").style.display = "none";
});


// Current language state
let currentLanguage = 'de'; // Default to German

/**
 * Initialize the language system
 * Checks for saved preferences and URL parameters
 */
function initializeLanguage() {
  // Check for saved language preference in sessionStorage
  const savedLanguage = sessionStorage.getItem('selectedLanguage');
  if (savedLanguage && translations[savedLanguage]) {
    currentLanguage = savedLanguage;
  }
  
  // Check URL parameter for language override
  const urlParams = new URLSearchParams(window.location.search);
  const langParam = urlParams.get('lang');
  if (langParam && translations[langParam]) {
    currentLanguage = langParam;
    sessionStorage.setItem('selectedLanguage', currentLanguage);
  }
  
  // Apply the determined language
  applyTranslations(currentLanguage);
  updateLanguageDisplay(currentLanguage);
}

/**
 * Apply translations to all elements with data-translate attributes
 * @param {string} language - The language code to apply
 */
function applyTranslations(language) {
  // Handle regular text translations
  const elements = document.querySelectorAll('[data-translate]');
  elements.forEach(element => {
    const key = element.getAttribute('data-translate');
    if (translations[language] && translations[language][key]) {
      element.innerHTML = translations[language][key];
    }
  });
  
  // Handle placeholder translations for input fields
  const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
  placeholderElements.forEach(element => {
    const key = element.getAttribute('data-translate-placeholder');
    if (translations[language] && translations[language][key]) {
      element.placeholder = translations[language][key];
    }
  });
  
  // Update document language attribute for accessibility
  document.documentElement.lang = language;
}

/**
 * Update the language dropdown display
 * @param {string} language - The current language code
 */
// Build dropdown list dynamically (excluding current)
function updateLanguageDisplay(language) {
  const currentFlag = document.getElementById("currentFlag");
  const langList = document.getElementById("langList");

  currentFlag.src = languageConfig[language].flag;
  currentFlag.alt = languageConfig[language].name;

  langList.innerHTML = "";
  Object.keys(languageConfig).forEach(code => {
    if (code !== language) {
      const li = document.createElement("li");
      li.innerHTML = `<img src="${languageConfig[code].flag}" alt="${languageConfig[code].name}"> ${languageConfig[code].name}`;
      li.onclick = () => changeLanguage(code);
      langList.appendChild(li);
    }
  });
}

/**
 * Change the current language
 * @param {string} language - The language code to switch to
 */
function changeLanguage(language) {
  if (translations[language]) {
    currentLanguage = language;
    sessionStorage.setItem("selectedLanguage", language);

    // Apply translations to the page
    applyTranslations(language);

    // Update flag and rebuild dropdown
    updateLanguageDisplay(language);

    // Update URL without reload
    const url = new URL(window.location);
    url.searchParams.set('lang', language);
    window.history.pushState({}, '', url);

    // Trigger event for other scripts
    window.dispatchEvent(new CustomEvent('languageChanged', { 
      detail: { language: language } 
    }));
  }
}


document.addEventListener("DOMContentLoaded", () => {
  const saved = sessionStorage.getItem("selectedLanguage");
  if (saved && languageConfig[saved]) currentLanguage = saved;
  updateLanguageDisplay(currentLanguage);
});
/**
 * Get the current language
 * @returns {string} The current language code
 */
function getCurrentLanguage() {
  return currentLanguage;
}

/**
 * Get available languages
 * @returns {Array} Array of available language codes
 */
function getAvailableLanguages() {
  return Object.keys(translations);
}

/**
 * Get translation for a specific key
 * @param {string} key - The translation key
 * @param {string} language - Optional language code (uses current if not provided)
 * @returns {string} The translated text or the key if translation not found
 */
function getTranslation(key, language = currentLanguage) {
  if (translations[language] && translations[language][key]) {
    return translations[language][key];
  }
  return key; // Fallback to key if translation not found
}

// Export functions for use in other modules (if using ES6 modules)
// If using traditional script tags, these functions are already global

// Auto-initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
  initializeLanguage();
});
const translations = {
  en: {
    'nav.home': 'Home',
    'nav.products': 'Products Help & Setup',
    'nav.about': 'About',
    'nav.contact': 'Contact',
    'nav.shop': 'Shop',
    'hero.your': 'Your',
    'hero.movement': 'Movement.',
    'hero.our': 'Our',
    'hero.drive': 'drive.',
    'search.placeholder': 'Search for answers in seconds',
    'cards.service.title': 'Your Direct <br> Customer Service',
    'cards.service.desc': 'Already a Sportstech customer? Our customer service is here to help: Track your order, solve technical issues, and get fast answers: anytime.',
    'cards.service.button': 'Chat with Support',
    'cards.advisor.title': 'Product Advisor <br> Find Your Perfect Device',
    'cards.advisor.desc': 'Get personalized advice, discover the right Sportstech product for your goals, and receive support with your order: quick and easy.',
    'cards.advisor.button': 'Chat with Sales',
    'knowledge.link': 'To the Knowledge Base',
    'quickAccess.title': 'Quick Access Help',
    'quickAccess.hotline.title': 'Talk to Us (Service Hotline)',
    'quickAccess.hotline.desc': 'Need quick support or personal advice? Our support heroes are just a call away. Dial: (+49) 030 868 224 64',
    'quickAccess.video.title': 'Step-by-Step Video Guides',
    'quickAccess.video.desc': 'Master your Product like a pro! Explore assembly videos, experts tips, and tutorials at your fingertips.',
    'explore.title': 'Explore Support Topics',
    'explore.product.title': 'Product Help & Setup',
    'explore.product.desc': 'Assembly instructions | Troubleshooting | FAQ | Smart usage hacks',
    'explore.orders.title': 'Orders & Deliveries',
    'explore.orders.desc': 'Track packages | Invoices | Cancellations | Shipping updates',
    'explore.payments.title': 'Payments & Billing',
    'explore.payments.desc': 'Online methods | Discounts | Secure checkout | Subscriptions',
    'explore.warranty.title': 'Warranty & Returns',
    'explore.warranty.desc': 'Exchanges | Repairs | Refunds | Product upgrades',
    'explore.store.title': 'Brand Store Berlin',
    'explore.store.desc': 'Try before you buy! Visit us at our flagship store for an in-person experience',
    'explore.app.title': 'Sportstech Live App',
    'explore.app.desc': 'Control, track & connect with your fitness gear anytime.',
    'explore.showAll': 'Show all posts',
    'dual.return.title': 'Need to Return a Product?',
    'dual.return.desc': 'Fast & hassle free returns,<br>we\'ll guide you every step of the way.',
    'dual.return.button': 'Go to Return Portal',
    'dual.store.title': 'Wanna Try </br>Before You Buy?',
    'dual.store.desc': 'Experience our gear in action at the </br/> Berlin Brand Store.',
    'dual.store.button': 'Take Me There',
    'social.title': 'Stay Connected',
    'social.desc': 'Follow us on social media for fitness tips, updates & exclusive deals!',
    'footer.company': 'Sportstech Brands<br />Holding GmbH',
    'footer.slogan1': 'PUSHING LIMITS.',
    'footer.slogan2': 'BREAKING BARRIERS.',
    'footer.slogan3': 'REDEFINING FITNESS.',
    'footer.terms': 'Terms & Conditions',
    'footer.privacy': 'Privacy Policy',
    'footer.imprint': 'Imprint'
  },
  de: {
    'nav.home': 'Startseite',
    'nav.products': 'Produkt Hilfe & Einrichtung',
    'nav.about': 'Über uns',
    'nav.contact': 'Kontakt',
    'nav.shop': 'Geschäft',
    'hero.your': 'Dein',
    'hero.movement': 'Bewegung.',
    'hero.our': 'Unser',
    'hero.drive': 'Antrieb.',
    'search.placeholder': 'In Sekundenschnelle nach Antworten suchen',
    'cards.service.title': 'Ihr direkter <br> Kundenservice',
    'cards.service.desc': 'Sind Sie bereits Kunde bei Sportstech? Unser Kundenservice hilft Ihnen gerne weiter: Verfolgen Sie Ihre Bestellung, lösen Sie technische Probleme und erhalten Sie schnelle Antworten – jederzeit.',
    'cards.service.button': 'Mit dem Support chatten',
    'cards.advisor.title': 'Produktberater <br> Finden Sie Ihr perfektes Gerät',
    'cards.advisor.desc': 'Erhalten Sie persönliche Beratung, entdecken Sie das richtige Sportstech-Produkt für Ihre Ziele und erhalten Sie Unterstützung bei Ihrer Bestellung: schnell und einfach.',
    'cards.advisor.button': 'Mit dem Vertrieb chatten',
    'knowledge.link': 'Zur Wissensdatenbank',
    'quickAccess.title': 'Schnellzugriff Hilfe',
    'quickAccess.hotline.title': 'Sprechen Sie mit uns (Service-Hotline)',
    'quickAccess.hotline.desc': 'Benötigen Sie schnelle Hilfe oder persönliche Beratung? Unsere Support-Helden sind nur einen Anruf entfernt. Wählen Sie: (+49) 030 868 224 64',
    'quickAccess.video.title': 'Schritt für Schritt Videoanleitungen',
    'quickAccess.video.desc': 'Beherrsche dein Produkt wie ein Profi! Entdecke Montagevideos, Expertentipps und Tutorials immer griffbereit.',
    'explore.title': 'Support-Themen erkunden',
    'explore.product.title': 'Produkt Hilfe & Einrichtung',
    'explore.product.desc': 'Montageanleitung | Fehlerbehebung | FAQ | Tipps für die intelligente Nutzung',
    'explore.orders.title': 'Bestellungen & Lieferungen',
    'explore.orders.desc': 'Pakete verfolgen | Rechnungen | Stornierungen | Versandaktualisierungen',
    'explore.payments.title': 'Zahlungen und Rechnungsstellung',
    'explore.payments.desc': 'Online-Methoden | Rabatte | Sichere Kaufabwicklung | Abonnements',
    'explore.warranty.title': 'Garantie & Rücksendungen',
    'explore.warranty.desc': 'Umtausch | Reparaturen | Rückerstattungen | Produkt-Upgrades',
    'explore.store.title': 'Markengeschäft Berlin',
    'explore.store.desc': 'Probieren Sie es aus, bevor Sie kaufen! Besuchen Sie uns in unserem Flagship-Store und erleben Sie es persönlich.',
    'explore.app.title': 'Sportstech Live App',
    'explore.app.desc': 'Kontrollieren, verfolgen und verbinden Sie Ihre Fitnessgeräte jederzeit.',
    'explore.showAll': 'Alle Beiträge anzeigen',
    'dual.return.title': 'Möchten Sie ein Produkt zurücksenden?',
    'dual.return.desc': 'Schnelle und unkomplizierte Rücksendungen – wir begleiten Sie bei jedem Schritt.',
    'dual.return.button': 'Zum Rückgabeportal gehen',
    'dual.store.title': 'Möchten Sie es vor dem Kauf ausprobieren?',
    'dual.store.desc': 'Erleben Sie unsere Ausrüstung in Aktion im Berlin Brand Store.',
    'dual.store.button': 'Bring mich dorthin',
    'social.title': 'Bleiben Sie in Verbindung',
    'social.desc': 'Folgen Sie uns in den sozialen Medien für Fitness-Tipps, Neuigkeiten und exklusive Angebote!',
    'footer.company': 'Sportstech Brands<br />Holding GmbH',
    'footer.slogan1': 'GRENZEN ÜBERSCHREITEN.',
    'footer.slogan2': 'BARRIEREN ÜBERWINDEN.',
    'footer.slogan3': 'FITNESS NEU DEFINIEREN.',
    'footer.terms': 'Allgemeine Geschäftsbedingungen',
    'footer.privacy': 'Datenschutzerklärung',
    'footer.imprint': 'Impressum'
  },
  es: {
    'nav.home': 'Inicio',
    'nav.products': 'Ayuda y configuración de productos',
    'nav.about': 'Acerca de',
    'nav.contact': 'Contacto',
    'nav.shop': 'Tienda',
    'hero.your': 'Tu',
    'hero.movement': 'Movimiento.',
    'hero.our': 'Nuestro',
    'hero.drive': 'conducir.',
    'search.placeholder': 'Busca respuestas en segundos',
    'cards.service.title': 'Su servicio de atención <br>  al cliente directo',
    'cards.service.desc': '¿Ya eres cliente de Sportstech? Nuestro servicio de atención al cliente está aquí para ayudarte: realiza el seguimiento de tu pedido, resuelve problemas técnicos y obtén respuestas rápidas en cualquier momento.',
    'cards.service.button': 'Chatear con el servicio de asistencia',
    'cards.advisor.title': 'Asesor de productos <br> Encuentre su dispositivo perfecto',
    'cards.advisor.desc': 'Obtén asesoramiento personalizado, descubre el producto Sportstech adecuado para tus objetivos y recibe asistencia con tu pedido: rápido y sencillo.',
    'cards.advisor.button': 'Chatear con ventas',
    'knowledge.link': 'A la base de conocimientos',
    'quickAccess.title': 'Ayuda de acceso rápido',
    'quickAccess.hotline.title': 'Hable con nosotros (línea directa de atención al cliente)',
    'quickAccess.hotline.desc': '¿Necesita asistencia rápida o asesoramiento personalizado? Nuestros expertos en asistencia están a solo una llamada de distancia. Marque el número: (+49) 030 868 224 64',
    'quickAccess.video.title': 'Guías en vídeo paso a paso',
    'quickAccess.video.desc': '¡Domina tu producto como un profesional! Explora vídeos de montaje, consejos de expertos y tutoriales al alcance de tu mano.',
    'explore.title': 'Explorar temas de soporte técnico',
    'explore.product.title': 'Ayuda y configuración del producto',
    'explore.product.desc': 'Instrucciones de montaje | Solución de problemas | Preguntas frecuentes | Consejos de uso inteligente',
    'explore.orders.title': 'Pedidos y entregas',
    'explore.orders.desc': 'Seguimiento de paquetes | Facturas | Cancelaciones | Actualizaciones de envíos',
    'explore.payments.title': 'Pagos y facturación',
    'explore.payments.desc': 'Métodos en línea | Descuentos | Pago seguro | Suscripciones',
    'explore.warranty.title': 'Garantía y devoluciones',
    'explore.warranty.desc': 'Cambios | Reparaciones | Reembolsos | Actualizaciones de productos',
    'explore.store.title': 'Tienda de marca Berlín',
    'explore.store.desc': '¡Pruébelo antes de comprarlo! Visítenos en nuestra tienda insignia para disfrutar de una experiencia personalizada.',
    'explore.app.title': 'App Sportstech Live',
    'explore.app.desc': 'Controla, realiza un seguimiento y conéctate con tu equipo de fitness en cualquier momento.',
    'explore.showAll': 'Mostrar todas las publicaciones',
    'dual.return.title': '¿Necesita devolver un producto?',
    'dual.return.desc': 'Devoluciones rápidas y sin complicaciones,<br>te guiaremos en cada paso del proceso.',
    'dual.return.button': 'Ir al portal de devoluciones',
    'dual.store.title': '¿Quieres Probar </br>Antes de Comprar?',
    'dual.store.desc': 'Prueba nuestro equipamiento en acción en  <br> la tienda de la marca en Berlín.',
    'dual.store.button': 'Llévame allí',
    'social.title': 'Manténgase conectado',
    'social.desc': '¡Síguenos en las redes sociales para recibir consejos de fitness, novedades y ofertas exclusivas!',
    'footer.company': 'Sportstech Brands<br />Holding GmbH',
    'footer.slogan1': 'SUPERANDO LÍMITES.',
    'footer.slogan2': 'ROMPIENDO BARRERAS.',
    'footer.slogan3': 'REDEFINIENDO EL FITNESS.',
    'footer.terms': 'Términos y condiciones',
    'footer.privacy': 'Política de privacidad',
    'footer.imprint': 'Aviso legal'
  },
  fr: {
    'nav.home': 'Accueil',
    'nav.products': 'Aide et configuration des produits',
    'nav.about': 'À propos',
    'nav.contact': 'Contact',
    'nav.shop': 'Boutique',
    'hero.your': 'Votre',
    'hero.movement': 'Mouvement.',
    'hero.our': 'Notre',
    'hero.drive': 'conduire.',
    'search.placeholder': 'Recherchez des réponses en quelques secondes',
    'cards.service.title': 'Votre service <br> clientèle direct',
    'cards.service.desc': 'Vous êtes déjà client Sportstech ? Notre service client est là pour vous aider : suivez votre commande, résolvez vos problèmes techniques et obtenez des réponses rapides, à tout moment.',
    'cards.service.button': "Discutez avec le service d' assistance",
    'cards.advisor.title': "Conseiller produit <br> Trouvez l'appareil qui vous convient",
    'cards.advisor.desc': "Obtenez des conseils personnalisés, découvrez le produit Sportstech adapté à vos objectifs et bénéficiez d'une assistance pour votre commande : rapide et facile.",
    'cards.advisor.button': 'Discutez avec le service commercial',
    'knowledge.link': 'Vers la base de connaissances',
    'quickAccess.title': 'Aide rapide',
    'quickAccess.hotline.title': "Contactez-nous (Service d'assistance téléphonique)",
    'quickAccess.hotline.desc': "Besoin d'une assistance rapide ou d'un conseil personnalisé ? Nos experts sont à votre disposition. Composez le : (+49) 030 868 224 64",
    'quickAccess.video.title': 'Guides vidéo étape par étape',
    'quickAccess.video.desc': "Maîtrisez votre produit comme un pro ! Découvrez des vidéos d'assemblage, des conseils d'experts et des tutoriels à portée de main.",
    'explore.title': "Explorer les rubriques d'assistance",
    'explore.product.title': 'Aide et configuration du produit',
    'explore.product.desc': "Instructions de montage | Dépannage | FAQ | Astuces d'utilisation intelligente",
    'explore.orders.title': 'Commandes et livraisons',
    'explore.orders.desc': 'Suivi des colis | Factures | Annulations | Mises à jour sur les expéditions',
    'explore.payments.title': 'Paiements et Facturation',
    'explore.payments.desc': 'Méthodes en ligne | Réductions | Paiement sécurisé | Abonnements',
    'explore.warranty.title': 'Garantie et retours',
    'explore.warranty.desc': 'Échanges | Réparations | Remboursements | Mises à niveau de produits',
    'explore.store.title': 'Magasin de marque Berlin',
    'explore.store.desc': "Essayez avant d'acheter ! Venez nous rendre visite dans notre magasin phare pour une expérience en personne.",
    'explore.app.title': 'Application Sportstech Live',
    'explore.app.desc': 'Contrôlez, suivez et connectez-vous à votre équipement de fitness à tout moment.',
    'explore.showAll': 'Afficher tous les messages',
    'dual.return.title': 'Vous souhaitez retourner un produit ?',
    'dual.return.desc': 'Retours rapides et sans tracas,<br>nous vous guidons à chaque étape.',
    'dual.return.button': 'Accéder au portail des retours',
    'dual.store.title': "Vous voulez essayer avant d'acheter ?",
    'dual.store.desc': 'Découvrez nos équipements en action dans notre boutique de Berlin.',
    'dual.store.button': 'Emmène-moi là-bas',
    'social.title': 'Restez connecté',
    'social.desc': 'Suivez-nous sur les réseaux sociaux pour obtenir des conseils de remise en forme, des mises à jour et des offres exclusives !',
    'footer.company': 'Sportstech Brands<br />Holding GmbH',
    'footer.slogan1': 'REPOUSSER LES LIMITES.',
    'footer.slogan2': 'BRISER LES BARRIÈRES.',
    'footer.slogan3': 'REDÉFINIR LA FORME PHYSIQUE',
    'footer.terms': 'Conditions générales',
    'footer.privacy': 'Politique de confidentialité',
    'footer.imprint': 'Mentions légales'
  },
  it: {
    'nav.home': 'Casa',
    'nav.products': 'Aiuto e configurazione dei prodotti',
    'nav.about': 'Informazioni',
    'nav.contact': 'Contatti',
    'nav.shop': 'Negozio',
    'hero.your': 'Il tuo',
    'hero.movement': 'Movimento.',
    'hero.our': 'Il nostro',
    'hero.drive': 'guida.',
    'search.placeholder': 'Cerca le risposte in pochi secondi',
    'cards.service.title': 'Il tuo servizio clienti <br> diretto',
    'cards.service.desc': 'Sei già cliente Sportstech? Il nostro servizio clienti è a tua disposizione per aiutarti: traccia il tuo ordine, risolvi problemi tecnici e ottieni risposte rapide in qualsiasi momento.',
    'cards.service.button': "Chatta con l'assistenza",
    'cards.advisor.title': 'Consulente di prodotto <br> Trova il dispositivo perfetto per te',
    'cards.advisor.desc': 'Ottieni consigli personalizzati, scopri il prodotto Sportstech più adatto ai tuoi obiettivi e ricevi assistenza per il tuo ordine: in modo semplice e veloce.',
    'cards.advisor.button': 'Chatta con il reparto vendite',
    'knowledge.link': 'Alla Knowledge Base',
    'quickAccess.title': 'Guida rapida',
    'quickAccess.hotline.title': 'Contattaci (Servizio di assistenza telefonica)',
    'quickAccess.hotline.desc': "Hai bisogno di assistenza rapida o di una consulenza personalizzata? I nostri esperti dell'assistenza sono a tua disposizione. Chiama il numero: (+49) 030 868 224 64",
    'quickAccess.video.title': 'Guide video passo passo',
    'quickAccess.video.desc': 'Diventa un esperto del tuo prodotto! Guarda i video di montaggio, i consigli degli esperti e i tutorial a portata di mano.',
    'explore.title': "Esplora gli argomenti dell'assistenza",
    'explore.product.title': 'Assistenza e configurazione del prodotto',
    'explore.product.desc': 'Istruzioni di montaggio | Risoluzione dei problemi | Domande frequenti | Suggerimenti per un utilizzo intelligente',
    'explore.orders.title': 'Ordini e consegne',
    'explore.orders.desc': 'Traccia i pacchi | Fatture | Cancellazioni | Aggiornamenti sulla spedizione',
    'explore.payments.title': 'Pagamenti e fatturazione',
    'explore.payments.desc': 'Metodi online | Sconti | Pagamento sicuro | Abbonamenti',
    'explore.warranty.title': 'Garanzia e resi',
    'explore.warranty.desc': 'Cambi | Riparazioni | Rimborsi | Aggiornamenti dei prodotti',
    'explore.store.title': 'Negozio monomarca Berlino',
    'explore.store.desc': "Prova prima di acquistare! Vieni a trovarci nel nostro negozio principale per un'esperienza diretta.",
    'explore.app.title': 'App Sportstech Live',
    'explore.app.desc': 'Controlla, monitora e connettiti con la tua attrezzatura fitness in qualsiasi momento.',
    'explore.showAll': 'Mostra tutti i post',
    'dual.return.title': 'Hai bisogno di restituire un prodotto?',
    'dual.return.desc': 'Resi rapidi e senza complicazioni,<br>ti guideremo passo dopo passo.',
    'dual.return.button': 'Vai al portale dei resi',
    'dual.store.title': 'Vuoi provare <br> prima di acquistare?',
    'dual.store.desc': 'Prova la nostra attrezzatura in azione presso il </br/> Berlin Brand Store.',
    'dual.store.button': 'Portami lì',
    'social.title': 'Rimani connesso',
    'social.desc': 'Seguici sui social media per consigli sul fitness, aggiornamenti e offerte esclusive!',
    'footer.company': 'Sportstech Brands<br />Holding GmbH',
    'footer.slogan1': 'SUPERARE I LIMITI.',
    'footer.slogan2': 'ABBATTERE LE BARRIERE.',
    'footer.slogan3': 'RIDEFINIRE IL FITNESS.',
    'footer.terms': 'Termini e Condizioni',
    'footer.privacy': 'Informativa sulla privacy',
    'footer.imprint': 'Impronta'
  }
};

// Language configuration with flag paths and display names
const languageConfig = {
  'en': { flag: 'assets/english-flag.png', name: 'English (GB)' },
  'de': { flag: 'assets/german-flag.png', name: 'German' },
  'es': { flag: 'assets/spain-flag.png', name: 'Spanish' },
  'fr': { flag: 'assets/france-flag.png', name: 'French' },
  'it': { flag: 'assets/italy-flag.png', name: 'Italian' }
};
function toggleLangList(event) {
  const list = document.getElementById("langList");
  list.style.display = (list.style.display === "block") ? "none" : "block";
  event.stopPropagation();
}

// Close dropdown when clicking outside
document.addEventListener("click", () => {
  document.getElementById("langList").style.display = "none";
});


// Current language state
let currentLanguage = 'de'; // Default to German

/**
 * Initialize the language system
 * Checks for saved preferences and URL parameters
 */
function initializeLanguage() {
  // Check for saved language preference in sessionStorage
  const savedLanguage = sessionStorage.getItem('selectedLanguage');
  if (savedLanguage && translations[savedLanguage]) {
    currentLanguage = savedLanguage;
  }
  
  // Check URL parameter for language override
  const urlParams = new URLSearchParams(window.location.search);
  const langParam = urlParams.get('lang');
  if (langParam && translations[langParam]) {
    currentLanguage = langParam;
    sessionStorage.setItem('selectedLanguage', currentLanguage);
  }
  
  // Apply the determined language
  applyTranslations(currentLanguage);
  updateLanguageDisplay(currentLanguage);
}

/**
 * Apply translations to all elements with data-translate attributes
 * @param {string} language - The language code to apply
 */
function applyTranslations(language) {
  // Handle regular text translations
  const elements = document.querySelectorAll('[data-translate]');
  elements.forEach(element => {
    const key = element.getAttribute('data-translate');
    if (translations[language] && translations[language][key]) {
      element.innerHTML = translations[language][key];
    }
  });
  
  // Handle placeholder translations for input fields
  const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
  placeholderElements.forEach(element => {
    const key = element.getAttribute('data-translate-placeholder');
    if (translations[language] && translations[language][key]) {
      element.placeholder = translations[language][key];
    }
  });
  
  // Update document language attribute for accessibility
  document.documentElement.lang = language;
}

/**
 * Update the language dropdown display
 * @param {string} language - The current language code
 */
// Build dropdown list dynamically (excluding current)
function updateLanguageDisplay(language) {
  const currentFlag = document.getElementById("currentFlag");
  const langList = document.getElementById("langList");

  currentFlag.src = languageConfig[language].flag;
  currentFlag.alt = languageConfig[language].name;

  langList.innerHTML = "";
  Object.keys(languageConfig).forEach(code => {
    if (code !== language) {
      const li = document.createElement("li");
      li.innerHTML = `<img src="${languageConfig[code].flag}" alt="${languageConfig[code].name}"> ${languageConfig[code].name}`;
      li.onclick = () => changeLanguage(code);
      langList.appendChild(li);
    }
  });
}

/**
 * Change the current language
 * @param {string} language - The language code to switch to
 */
function changeLanguage(language) {
  if (translations[language]) {
    currentLanguage = language;
    sessionStorage.setItem("selectedLanguage", language);

    // Apply translations to the page
    applyTranslations(language);

    // Update flag and rebuild dropdown
    updateLanguageDisplay(language);

    // Update URL without reload
    const url = new URL(window.location);
    url.searchParams.set('lang', language);
    window.history.pushState({}, '', url);

    // Trigger event for other scripts
    window.dispatchEvent(new CustomEvent('languageChanged', { 
      detail: { language: language } 
    }));
  }
}


document.addEventListener("DOMContentLoaded", () => {
  const saved = sessionStorage.getItem("selectedLanguage");
  if (saved && languageConfig[saved]) currentLanguage = saved;
  updateLanguageDisplay(currentLanguage);
});
/**
 * Get the current language
 * @returns {string} The current language code
 */
function getCurrentLanguage() {
  return currentLanguage;
}

/**
 * Get available languages
 * @returns {Array} Array of available language codes
 */
function getAvailableLanguages() {
  return Object.keys(translations);
}

/**
 * Get translation for a specific key
 * @param {string} key - The translation key
 * @param {string} language - Optional language code (uses current if not provided)
 * @returns {string} The translated text or the key if translation not found
 */
function getTranslation(key, language = currentLanguage) {
  if (translations[language] && translations[language][key]) {
    return translations[language][key];
  }
  return key; // Fallback to key if translation not found
}

// Export functions for use in other modules (if using ES6 modules)
// If using traditional script tags, these functions are already global

// Auto-initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
  initializeLanguage();
});